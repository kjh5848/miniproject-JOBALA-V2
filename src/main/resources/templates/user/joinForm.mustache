{{> layout/header}}

<!--기업, 개인 로그인 폼-->
<div class="container mt-3">
    <div class="btn-group d-flex justify-content-center">
        <!--                개인이 로그인을 할때 사용-->
        <form action="/guestJoin" method="post" onsubmit="return valid()">
            <input type="hidden" name="role" value="0">
            <button id="btnActiveComp" type="button" class="btn btn-lg btn-light form-control"
                    data-bs-toggle="collapse" data-bs-target="#demo2">개인
            </button>
        </form>
        <!--                기업이 로그인을 할때 사용-->
        <form action="/compJoin" method="post" onsubmit="return valid()">
            <input type="hidden" name="role" value="1">
            <button id="btnActiveUser" type="button" class="btn btn-lg btn-light form-control"
                    data-bs-toggle="collapse" data-bs-target="#demo">기업
            </button>
        </form>
    </div>

    <div>
        <div id="demo" class="collapse mt-5">
            <div class="row justify-content-center">
                <div class="col-md-6">
                    <div class="card">
                        <div class="card-header">기업 회원가입</div>
                        <div class="card-body" style="padding-top: 0px;">
                            <form action="/join" method="post">
                                <div class="mb-3">
                                    <div class="mt-3">
                                        <p>사업자번호</p>
                                        <input type="text" class="form-control" id="compNum"
                                               name="compNum" placeholder="ENTER companyNumber" value="1234"
                                               required>
                                    </div>
                                </div>

                                <div class="mb-3">
                                    <p>사업자명</p>
                                    <input type="text" class="form-control" id="ceo"
                                           name="ceo" placeholder="ENTER companyName" value="박선규" required>
                                </div>

                                <div class="mb-3">
                                    <p>회사명</p>
                                    <input type="text" class="form-control" id="compname" name="compname"
                                           placeholder="ENTER companyName" value="선규컴" required>
                                </div>

                                <div class="mb-3">
                                    <p>회사 주소</p>
                                    <input type="text" class="form-control" id="address"
                                           name="address" placeholder="ENTER companyAddress" value="부산광역시 전포"
                                           required>
                                </div>

                                <!-- 인사 담당자 정보 -->
                                <div class="mb-3">
                                    <div class="mb-3">
                                        <p>아이디</p>
                                        <div class="d-flex text-nowrap">
                                            <input type="text" class="form-control" id="username" name="username"
                                                   placeholder="ENTER username" value="ssar" required>
                                            <button type="button" onclick="usernameSameCheck()"
                                                    class="btn btn-primary btn-block">중복
                                                체크
                                            </button>
                                        </div>
                                    </div>

                                    <div class="mb-3">
                                        <p>이메일</p>
                                        <div class="d-flex text-nowrap">
                                            <input type="email" class="form-control" id="email" name="email"
                                                   placeholder="ENTER email" value="ssar@nate.com" required>
                                        </div>
                                    </div>

                                    <div class="mb-3">
                                        <p>비밀번호</p>
                                        <input type="password" class="form-control" id="password" name="password"
                                               placeholder="ENTER password" value="1234" required>
                                    </div>
                                </div>

                                <div class="mb-3">
                                    <p>가입자명</p>
                                    <input type="name" class="form-control" id="name" name="name"
                                           placeholder="Enter userName" value="박선규" required>
                                </div>
                                <div class="mb-3">
                                    <p>휴대폰</p>
                                    <input type="tel" class="form-control" id="phone" name="phone"
                                           placeholder="Enter phoneNumber" value="01012345678" required>
                                </div>


                                <div class="text-center mb-5 ">
                                    <button type="submit" class="btn btn-primary btn-block">가입하기</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
                <br><br><br>
            </div>
        </div>
    </div>
    <div>
        <div id="demo2" class="collapse mt-5">
            <div class="row justify-content-center">
                <div class="col-md-6">
                    <div class="card">
                        <div class="card-header">개인 회원가입</div>
                        <div class="card-body">
                            <form action="/join" method="post">
                                <div class="mb-3">
                                    <p>이름</p>
                                    <input type="text" class="form-control" id="name" name="name"
                                           placeholder="Enter userName" value="박선규" required>
                                </div>
                                <div class="mb-3">
                                    <p>아이디</p>
                                    <div class="d-flex text-nowrap">
                                        <input type="text" class="form-control" id="username" name="username"
                                               placeholder="ENTER username" value="ssar" required>
                                        <button type="button" onclick="usernameSameCheck()"
                                                class="btn btn-primary btn-block">중복
                                            체크
                                        </button>
                                    </div>
                                </div>

                                <div class="mb-3">
                                    <p>이메일</p>
                                    <div class="d-flex text-nowrap">
                                        <input type="email" class="form-control" id="email" name="email"
                                               placeholder="ENTER email" value="ssar@nate.com" required>
                                    </div>
                                </div>

                                <div class="mb-3">
                                    <p>비밀번호</p>
                                    <input type="password" class="form-control" id="password" name="password"
                                           placeholder="ENTER password" value="1234" required>
                                </div>
                                <div class="mb-3">
                                    <p>거주지</p>
                                    <input type="text" class="form-control" id="address" name="address"
                                           placeholder="ENTER address" value="부산광역시 금정구" required>
                                </div>
                                <div class="mb-3">
                                    <p>나이</p>
                                    <input type="Date" class="form-control" id="age" name="age"
                                           placeholder="ENTER age" required>
                                </div>
                                <div class="mb-3">
                                    <p>휴대폰 번호</p>
                                    <input type="tel" class="form-control" id="phone" name="phone"
                                           placeholder="ENTER phoneNumber" value="01012345678" required>
                                </div>
                                <div class="text-center">
                                    <button type="submit" class="btn btn-primary btn-block">회원가입</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
</div>

<script>


    <!--  아이디 중복체크  -->
    let isSameCheck = false;

    function valid() {
        if (isSameCheck == false) {
            alert("아이디 중복체크를 해야 합니다");
        }
        return isSameCheck;
    }

    function usernameSameCheck() {
        let username = $("#username").val();
        $.ajax({
            url: "/api/username-same-check?username=" + username,
            type: "get"
        }).done((res) => {
            console.log(res);
            if (res.body == true) {
                isSameCheck = true;
                alert("회원가입 가능한 아이디 입니다.");
            } else {
                isSameCheck = false;
                alert("동일한 아이디가 존재합니다");
            }
        }).fail((res) => {
            alert(res.responseJSON.msg);
        });
    }

    $(function () {

        $("#btnActiveComp").click();
        // 개인/기업 버튼 클릭 이벤트 처리
        $(".btn-light").click(function () {
            // 현재 클릭된 버튼의 ID 가져오기
            var currentId = $(this).attr("id");

            // 다른 버튼의 토글 닫기
            $(".collapse.show").not("#" + currentId + " .collapse").collapse("hide");

            // 현재 클릭된 버튼의 토글 열기/닫기
            $("#" + currentId + " .collapse").collapse("toggle");
        });
    });
</script>

{{> layout/footer}}